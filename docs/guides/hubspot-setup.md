# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HubSpot API

## ‚ùå –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (scopes) –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö CRM.

**–û—à–∏–±–∫–∞**: `403 Forbidden - This app hasn't been granted all required scopes`

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –°–æ–∑–¥–∞—Ç—å Private App –≤ HubSpot

1. –í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à HubSpot –∞–∫–∫–∞—É–Ω—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏) ‚Üí **Integrations** ‚Üí **Private Apps**
3. –ù–∞–∂–º–∏—Ç–µ **"Create a private app"**
4. –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `Dashboard API`
5. –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö CRM –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞`

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Scopes)

–í —Ä–∞–∑–¥–µ–ª–µ **Scopes** –æ—Ç–º–µ—Ç—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞:

#### üìã CRM - Contacts (–ö–æ–Ω—Ç–∞–∫—Ç—ã)
- `crm.objects.contacts.read` - –ß—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `crm.schemas.contacts.read` - –ß—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

#### üíº CRM - Deals (–°–¥–µ–ª–∫–∏)
- `crm.objects.deals.read` - –ß—Ç–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫
- `crm.schemas.deals.read` - –ß—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–¥–µ–ª–æ–∫

#### üè¢ CRM - Companies (–ö–æ–º–ø–∞–Ω–∏–∏) - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- `crm.objects.companies.read` - –ß—Ç–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π
- `crm.schemas.companies.read` - –ß—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–ø–∞–Ω–∏–π

#### üé´ CRM - Tickets (–¢–∏–∫–µ—Ç—ã) - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- `tickets` - –î–æ—Å—Ç—É–ø –∫ —Ç–∏–∫–µ—Ç–∞–º

### 3. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π Access Token

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Access Token** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pat-`)
3. –ó–∞–º–µ–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `.env`:

```env
HUBSPOT_API_KEY=pat-–≤–∞—à-–Ω–æ–≤—ã–π-—Ç–æ–∫–µ–Ω-–∑–¥–µ—Å—å
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è Private App

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Private App —Ç–æ–∫–µ–Ω, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:

```javascript
// –í–º–µ—Å—Ç–æ hapikey –≤ URL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Bearer token –≤ headers
headers: {
    'Authorization': `Bearer ${HUBSPOT_API_KEY}`,
    'Content-Type': 'application/json'
}
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
node test.js
```

–ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å–≤–æ–π—Å—Ç–≤ —Å–¥–µ–ª–æ–∫
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–æ–∫

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

–ï—Å–ª–∏ Private App –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. **Legacy API Key** - –Ω–æ –æ–Ω –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
2. **OAuth App** - –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
3. **Webhook Subscriptions** - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ 401 Unauthorized
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –û—à–∏–±–∫–∞ 403 Forbidden
- –î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ scopes –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤

### –û—à–∏–±–∫–∞ 429 Rate Limited
- –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ì–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```javascript
import {
    getAllCRMData,           // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ CRM
    getContactsWithProperties, // –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å –≤—ã–±–æ—Ä–æ–º —Å–≤–æ–π—Å—Ç–≤
    getDealsWithProperties,   // –°–¥–µ–ª–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º —Å–≤–æ–π—Å—Ç–≤
    searchContacts,          // –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    searchDeals,             // –ü–æ–∏—Å–∫ —Å–¥–µ–ª–æ–∫
    getBatchContactsByIds,   // –ü–∞–∫–µ—Ç–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    getBatchDealsByIds       // –ü–∞–∫–µ—Ç–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫
} from './hubspot-api.js';

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–∏–º –≤—ã–∑–æ–≤–æ–º
const allData = await getAllCRMData();
```

---

**üí° –°–æ–≤–µ—Ç**: –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º –ø—É–±–ª–∏—á–Ω–æ!