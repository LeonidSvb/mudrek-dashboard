#!/bin/sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ metrics-schema.yaml
if git diff --cached --name-only | grep -q "docs/metrics-schema.yaml"; then
  echo "üìù metrics-schema.yaml changed, regenerating definitions..."
  npm run docs:generate

  # –î–æ–±–∞–≤–ª—è–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–º–º–∏—Ç
  git add lib/metric-definitions.generated.ts
  git add docs/METRICS_GUIDE.generated.md

  echo "‚úÖ Auto-regenerated TypeScript and Markdown"
fi
